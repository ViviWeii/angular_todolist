<section [ngClass]="storeIndexTheme">
  <div class="todoDiv" *ngIf="!isEditModeOpen">
    <div class="todoTitle">
      <div class="todoInlineTitle">
        <h1>代辦事項</h1>
        <div class="todoSpan">
          <span (click)="changeEditMode()">
            <i class="fas fa-pencil-alt"></i>
          </span>
        </div>
      </div>
    </div>
    <div class="todoInlineDiv">
      <ul class="indexUl" *ngFor="let i of storeTodoList">
        <li class="todoItem">
          <input type="checkbox" [name]="i.id" [id]="i.id"
            [checked]="i.isComplete" (change)="changeComplete(i)"/>
          <label [for]="i.id">
            <div class="todoInlineItem {{ i.isComplete ? 'complete' : '' }}">
              <p>{{ i.title }}</p>
              <span *ngIf="i.isComplete">
                <i class="fas fa-check"></i>
              </span>
            </div>
          </label>
        </li>
      </ul>
    </div>
  </div>
  <div class="todoDiv" *ngIf="isEditModeOpen">
    <div class="todoTitle">
      <div class="todoInlineTitle">
        <h1>代辦事項</h1>
        <div class="todoSpan">
          <span (click)="openColorModal()">
            <i class="fas fa-palette"></i>
          </span>
          <span (click)="changeEditMode()">
            <i class="fas fa-check"></i>
          </span>
        </div>
      </div>
    </div>
    <div class="todoInlineDiv" cdkDropList (cdkDropListDropped)="drop($event)">
      <ul class="editUl">
        <li id="addItem" class="todoItem" (click)="openAddModal()">
          <div class="todoInlineItem">
            <div>
              <p class="addItemP">
                <i class="fas fa-plus-circle"></i>添加項目
              </p>
            </div>
          </div>
        </li>
        <li class="todoItem" *ngFor="let i of storeTodoList" cdkDrag 
          (mousedown)=" isDragOpen ? '' : judgeDragOpen() " (mouseenter)=" isDragOpen ? judgeDragClose() : '' ">
          <div class="todoInlineItem {{ i.isComplete ? 'complete' : '' }}">
            <div>
              <i class="fas fa-sort" *ngIf="!i.isEditTitleOpen" [style.display]=" isDragOpen ? 'none' : '' "></i>
              <input type="checkbox" [name]="i.id" [id]="i.id" [checked]="i.isEditTitleOpen" (change)="openOrCloseEdit($event)">
              <label [for]="i.id">
                <p *ngIf="!i.isEditTitleOpen">{{i.title}}</p>
                <input *ngIf="i.isEditTitleOpen" type="text" [(ngModel)]="changeTitle">
              </label>
              <span *ngIf="!i.isEditTitleOpen" (click)="deleteTodoItem(i.id)" [style.opacity]=" isDragOpen ? 0 : 1 ">
                <i class="fas fa-trash"></i>
              </span>
              <span *ngIf="i.isEditTitleOpen" class="editSpan">
                  <i class="fas fa-check" (click)="editTodoTitleComplete(i.title)"></i>
                <label [for]="i.id">
                  <i class="fas fa-times"></i>
                </label>
              </span>
            </div>
          </div>
        </li>
      </ul>
    </div>
  </div>
</section>

<app-addModal *ngIf="isAddModalOpen" [storeIndexTheme]="storeIndexTheme" (openModal)="openAddModal()" (biClose)="addTodoItem($event)">
</app-addModal>
<app-colorModal *ngIf="isColorModalOpen" (openModal)="openColorModal()" (changeThemeColor)="changeColor($event)">
</app-colorModal>
